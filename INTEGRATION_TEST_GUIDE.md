# LangManus Web UI - é›†æˆæµ‹è¯•æŒ‡å—

## å¿«é€Ÿå¼€å§‹

æœ¬æŒ‡å—å°†å¸®åŠ©æ‚¨å¿«é€Ÿæµ‹è¯• LangManus Web UI å‰ç«¯ä¸åç«¯APIçš„é›†æˆã€‚

## å‰ç½®æ¡ä»¶

- âœ… Node.js 20+ (å·²å®‰è£…)
- âœ… Python 3.8+ (å·²å®‰è£…)
- âœ… pnpm (å·²å®‰è£…)

## æ­¥éª¤1: å¯åŠ¨å‰ç«¯æœåŠ¡

å‰ç«¯æœåŠ¡å·²ç»åœ¨è¿è¡Œä¸­ï¼š

```bash
# å‰ç«¯æœåŠ¡çŠ¶æ€
âœ… è¿è¡Œåœ¨: http://localhost:3000
âœ… è¿›ç¨‹ID: æŸ¥çœ‹è¿è¡Œä¸­çš„è¿›ç¨‹
âœ… ç¯å¢ƒå˜é‡: NEXT_PUBLIC_API_URL=http://localhost:8000/api
```

## æ­¥éª¤2: å¯åŠ¨åç«¯APIæœåŠ¡

### æ–¹æ³•1: ä½¿ç”¨å¯åŠ¨è„šæœ¬ (æ¨è)

```bash
./start_backend.sh
```

### æ–¹æ³•2: æ‰‹åŠ¨å¯åŠ¨

```bash
# å®‰è£…Pythonä¾èµ–
pip3 install -r requirements.txt

# å¯åŠ¨åç«¯æœåŠ¡
python3 backend_example.py
```

## æ­¥éª¤3: éªŒè¯æœåŠ¡çŠ¶æ€

### æ£€æŸ¥åç«¯API

```bash
# å¥åº·æ£€æŸ¥
curl http://localhost:8000/

# é¢„æœŸå“åº”
{
  "message": "LangManus Backend API is running",
  "timestamp": "2025-06-02T...",
  "endpoints": {
    "chat_stream": "/api/chat/stream",
    "docs": "/docs"
  }
}
```

### æ£€æŸ¥å‰ç«¯æœåŠ¡

```bash
# è®¿é—®å‰ç«¯
curl -I http://localhost:3000

# é¢„æœŸå“åº”
HTTP/1.1 200 OK
```

## æ­¥éª¤4: æµ‹è¯•APIé›†æˆ

### ä½¿ç”¨curlæµ‹è¯•æµå¼API

```bash
curl -X POST http://localhost:8000/api/chat/stream \
  -H "Content-Type: application/json" \
  -H "Accept: text/event-stream" \
  -d '{
    "messages": [
      {
        "id": "test_001",
        "role": "user",
        "type": "text",
        "content": "ä½ å¥½ï¼Œè¯·ä»‹ç»ä¸€ä¸‹è‡ªå·±"
      }
    ],
    "deep_thinking_mode": false,
    "search_before_planning": false,
    "debug": true
  }' \
  --no-buffer
```

### é¢„æœŸçš„SSEå“åº”

```
event: start_of_workflow
data: {"workflow_id": "uuid-string", "input": [...]}

event: start_of_agent
data: {"agent_name": "coordinator", "agent_id": "uuid-string"}

event: start_of_llm
data: {"agent_name": "coordinator"}

event: message
data: {"message_id": "uuid-string", "delta": {"content": "æ„Ÿ"}}

event: message
data: {"message_id": "uuid-string", "delta": {"content": "è°¢"}}

...

event: end_of_llm
data: {"agent_name": "coordinator"}

event: end_of_agent
data: {"agent_id": "uuid-string"}

event: end_of_workflow
data: {"workflow_id": "uuid-string", "messages": [...]}
```

## æ­¥éª¤5: å‰ç«¯ç•Œé¢æµ‹è¯•

1. **æ‰“å¼€æµè§ˆå™¨è®¿é—®**: http://localhost:3000

2. **æµ‹è¯•åŸºæœ¬å¯¹è¯**:
   - åœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥: "ä½ å¥½"
   - ç‚¹å‡»å‘é€æŒ‰é’®
   - è§‚å¯Ÿæµå¼å“åº”æ•ˆæœ

3. **æµ‹è¯•æ·±åº¦æ€è€ƒæ¨¡å¼**:
   - å¯ç”¨"æ·±åº¦æ€è€ƒ"å¼€å…³
   - è¾“å…¥å¤æ‚é—®é¢˜: "è¯·åˆ†æäººå·¥æ™ºèƒ½çš„å‘å±•è¶‹åŠ¿"
   - è§‚å¯Ÿæ¨ç†è¿‡ç¨‹å’Œæœ€ç»ˆå›ç­”

4. **æµ‹è¯•æœç´¢å¢å¼ºæ¨¡å¼**:
   - å¯ç”¨"æœç´¢å‰è§„åˆ’"å¼€å…³
   - è¾“å…¥éœ€è¦æœç´¢çš„é—®é¢˜
   - è§‚å¯Ÿå·¥å…·è°ƒç”¨è¿‡ç¨‹

## æ­¥éª¤6: è°ƒè¯•å’Œç›‘æ§

### å‰ç«¯è°ƒè¯•

1. æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…· (F12)
2. æŸ¥çœ‹ Network é¢æ¿ä¸­çš„ SSE è¿æ¥
3. æŸ¥çœ‹ Console é¢æ¿ä¸­çš„æ—¥å¿—ä¿¡æ¯

### åç«¯è°ƒè¯•

1. æŸ¥çœ‹åç«¯æ§åˆ¶å°è¾“å‡º
2. è®¿é—® API æ–‡æ¡£: http://localhost:8000/docs
3. ä½¿ç”¨ FastAPI è‡ªåŠ¨ç”Ÿæˆçš„äº¤äº’å¼æ–‡æ¡£æµ‹è¯•

## å¸¸è§é—®é¢˜æ’æŸ¥

### 1. CORS é”™è¯¯

**é—®é¢˜**: å‰ç«¯æ— æ³•è¿æ¥åç«¯ï¼Œå‡ºç°è·¨åŸŸé”™è¯¯

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ£€æŸ¥åç«¯CORSé…ç½®
# ç¡®ä¿åç«¯å…è®¸ http://localhost:3000 è®¿é—®
```

### 2. è¿æ¥è¶…æ—¶

**é—®é¢˜**: SSEè¿æ¥å»ºç«‹å¤±è´¥æˆ–ä¸­æ–­

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ£€æŸ¥åç«¯æœåŠ¡çŠ¶æ€
curl http://localhost:8000/api/health

# æ£€æŸ¥ç½‘ç»œè¿æ¥
ping localhost
```

### 3. ç¯å¢ƒå˜é‡é—®é¢˜

**é—®é¢˜**: å‰ç«¯æ— æ³•æ‰¾åˆ°åç«¯API

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ£€æŸ¥ç¯å¢ƒå˜é‡
cat .env

# ç¡®ä¿åŒ…å«
NEXT_PUBLIC_API_URL=http://localhost:8000/api
```

### 4. ç«¯å£å†²çª

**é—®é¢˜**: ç«¯å£è¢«å ç”¨

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ£€æŸ¥ç«¯å£ä½¿ç”¨æƒ…å†µ
netstat -tlnp | grep :8000
netstat -tlnp | grep :3000

# æ€æ­»å ç”¨è¿›ç¨‹
kill -9 <PID>
```

## æ€§èƒ½æµ‹è¯•

### å¹¶å‘æµ‹è¯•

```bash
# ä½¿ç”¨ ab å·¥å…·æµ‹è¯•å¹¶å‘æ€§èƒ½
ab -n 100 -c 10 -T 'application/json' -p test_payload.json http://localhost:8000/api/chat/stream
```

### å†…å­˜ç›‘æ§

```bash
# ç›‘æ§åç«¯å†…å­˜ä½¿ç”¨
top -p $(pgrep -f backend_example.py)

# ç›‘æ§å‰ç«¯å†…å­˜ä½¿ç”¨
top -p $(pgrep -f next)
```

## é«˜çº§æµ‹è¯•åœºæ™¯

### 1. é•¿æ—¶é—´å¯¹è¯æµ‹è¯•

æµ‹è¯•å¤šè½®å¯¹è¯çš„ç¨³å®šæ€§å’Œå†…å­˜ç®¡ç†ã€‚

### 2. å¤§æ–‡æœ¬å¤„ç†æµ‹è¯•

å‘é€åŒ…å«å¤§é‡æ–‡æœ¬çš„æ¶ˆæ¯ï¼Œæµ‹è¯•æµå¼å¤„ç†èƒ½åŠ›ã€‚

### 3. å¼‚å¸¸æƒ…å†µæµ‹è¯•

- ç½‘ç»œä¸­æ–­æ¢å¤
- æœåŠ¡é‡å¯æ¢å¤
- æ— æ•ˆè¯·æ±‚å¤„ç†

## é›†æˆæ£€æŸ¥æ¸…å•

- [ ] å‰ç«¯æœåŠ¡æ­£å¸¸å¯åŠ¨ (http://localhost:3000)
- [ ] åç«¯æœåŠ¡æ­£å¸¸å¯åŠ¨ (http://localhost:8000)
- [ ] ç¯å¢ƒå˜é‡é…ç½®æ­£ç¡®
- [ ] CORSé…ç½®æ­£ç¡®
- [ ] SSEè¿æ¥å»ºç«‹æˆåŠŸ
- [ ] æµå¼æ¶ˆæ¯æ­£å¸¸æ¥æ”¶
- [ ] é”™è¯¯å¤„ç†æ­£å¸¸å·¥ä½œ
- [ ] æ·±åº¦æ€è€ƒæ¨¡å¼æ­£å¸¸
- [ ] æœç´¢å¢å¼ºæ¨¡å¼æ­£å¸¸
- [ ] å‰ç«¯UIå“åº”æ­£å¸¸
- [ ] åç«¯æ—¥å¿—è¾“å‡ºæ­£å¸¸

## éƒ¨ç½²å»ºè®®

### å¼€å‘ç¯å¢ƒ

- å‰ç«¯: http://localhost:3000
- åç«¯: http://localhost:8000

### ç”Ÿäº§ç¯å¢ƒ

- ä½¿ç”¨åå‘ä»£ç† (Nginx)
- é…ç½®HTTPS
- è®¾ç½®é€‚å½“çš„CORSç­–ç•¥
- æ·»åŠ é€Ÿç‡é™åˆ¶
- é…ç½®æ—¥å¿—æ”¶é›†

## æ”¯æŒå’Œåé¦ˆ

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š

1. æœåŠ¡çŠ¶æ€å’Œæ—¥å¿—
2. ç½‘ç»œè¿æ¥
3. é…ç½®æ–‡ä»¶
4. ä¾èµ–ç‰ˆæœ¬

éœ€è¦å¸®åŠ©æ—¶ï¼Œè¯·æä¾›ï¼š
- é”™è¯¯ä¿¡æ¯
- æœåŠ¡æ—¥å¿—
- ç¯å¢ƒä¿¡æ¯
- å¤ç°æ­¥éª¤

---

**æµ‹è¯•å®Œæˆåï¼Œæ‚¨å°±å¯ä»¥å¼€å§‹å¼€å‘è‡ªå·±çš„åç«¯æœåŠ¡äº†ï¼** ğŸ‰ 